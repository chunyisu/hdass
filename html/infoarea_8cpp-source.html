<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HDASS: infoarea.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>infoarea.cpp</h1><a href="infoarea_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment"> *   Copyright (C) 2005 by sonicat                                         *</span>
00003 <span class="comment"> *   is87098@cis.nctu.edu.tw                                               *</span>
00004 <span class="comment"> *                                                                         *</span>
00005 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00006 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
00007 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
00008 <span class="comment"> *   (at your option) any later version.                                   *</span>
00009 <span class="comment"> *                                                                         *</span>
00010 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
00011 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
00012 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
00013 <span class="comment"> *   GNU General Public License for more details.                          *</span>
00014 <span class="comment"> *                                                                         *</span>
00015 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
00016 <span class="comment"> *   along with this program; if not, write to the                         *</span>
00017 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
00018 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
00019 <span class="comment"> ***************************************************************************/</span>
00020 <span class="preprocessor">#include "<a class="code" href="infoarea_8h.html">infoarea.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="sonogram_8h.html">sonogram.h</a>"</span>
00022 <span class="preprocessor">#include &lt;qvbox.h&gt;</span>
00023 <span class="preprocessor">#include &lt;qlabel.h&gt;</span>
00024 <span class="preprocessor">#include &lt;kdebug.h&gt;</span>
00025 <span class="preprocessor">#include &lt;qpainter.h&gt;</span>
<a name="l00026"></a><a class="code" href="classInfoArea.html#InfoAreaa0">00026</a> <a class="code" href="classInfoArea.html#InfoAreaa0">InfoArea::InfoArea</a>(<a class="code" href="classQWidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00027  : <a class="code" href="classQWidget.html">QWidget</a>(parent, name)
00028 {
00029   <a class="code" href="classInfoArea.html#InfoAreaa1">xSetup</a>();
00030 }
00031 
00032 
<a name="l00033"></a><a class="code" href="classInfoArea.html#InfoAreaa2">00033</a> <a class="code" href="classInfoArea.html#InfoAreaa2">InfoArea::~InfoArea</a>()
00034 {
00035 }
00036 
<a name="l00037"></a><a class="code" href="classInfoArea.html#InfoAreaa1">00037</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAreaa1">InfoArea::xSetup</a>()
00038 {
00039    <span class="comment">//DAVID Setup Background;</span>
00040    pixBackground.load(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBackground.png"</span>);
00041    setBackgroundPixmap(pixBackground);
00042    
00043    <span class="comment">//DAVID</span>
00044    <a class="code" href="classInfoArea.html#InfoAreao3">m_pAnalyzer</a> = <span class="keyword">new</span> <a class="code" href="classSonogram.html">Sonogram</a>( <span class="keyword">this</span> );            
00045    <a class="code" href="classInfoArea.html#InfoAreao3">m_pAnalyzer</a>-&gt;setGeometry( 417,144, 338,60 );
00046    <a class="code" href="classInfoArea.html#InfoAreao3">m_pAnalyzer</a>-&gt;show();
00047    
00048    <span class="comment">//DAVID Load BtnGraphic</span>
00049    <a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[0]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBtn-VolumeUp.png"</span>);
00050    <a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[1]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBtn-VolumeUp-Active.png"</span>);
00051    <a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[2]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBtn-VolumeDown.png"</span>);
00052    <a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[3]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBtn-VolumeDown-Active.png"</span>);
00053    <a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[4]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBtn-PlayListDelete.png"</span>);
00054    <a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[5]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/InfoAreaBtn-PlayListDelete-Active.png"</span>);
00055    <span class="comment">//DAVID Set Volume Buttons</span>
00056    <a class="code" href="classInfoArea.html#InfoAreao0">IABtnVolumeUp</a>=<span class="keyword">new</span> <a class="code" href="classSkinButton.html">SkinButton</a>(<span class="keyword">this</span>);
00057    <a class="code" href="classInfoArea.html#InfoAreao1">IABtnVolumeDown</a>=<span class="keyword">new</span> SkinButton(<span class="keyword">this</span>);
00058    <a class="code" href="classInfoArea.html#InfoAreao2">IABtnPlayListDelete</a>=<span class="keyword">new</span> SkinButton(<span class="keyword">this</span>);
00059 
00060    <a class="code" href="classInfoArea.html#InfoAreao0">IABtnVolumeUp</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(<a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[0],<a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[1]);
00061    <a class="code" href="classInfoArea.html#InfoAreao0">IABtnVolumeUp</a>-&gt;setGeometry(418,38,60,60);
00062    <a class="code" href="classInfoArea.html#InfoAreao0">IABtnVolumeUp</a>-&gt;show();
00063    
00064    <a class="code" href="classInfoArea.html#InfoAreao1">IABtnVolumeDown</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(<a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[2],<a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[3]);
00065    <a class="code" href="classInfoArea.html#InfoAreao1">IABtnVolumeDown</a>-&gt;setGeometry(684,349,60,60);
00066    <a class="code" href="classInfoArea.html#InfoAreao1">IABtnVolumeDown</a>-&gt;show();
00067    
00068    <a class="code" href="classInfoArea.html#InfoAreao2">IABtnPlayListDelete</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(<a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[4],<a class="code" href="classInfoArea.html#InfoArear1">BtnGraphic</a>[5]);
00069    <a class="code" href="classInfoArea.html#InfoAreao2">IABtnPlayListDelete</a>-&gt;setGeometry(346,477,42,42);
00070    <a class="code" href="classInfoArea.html#InfoAreao2">IABtnPlayListDelete</a>-&gt;show();
00071    connect(<a class="code" href="classInfoArea.html#InfoAreao2">IABtnPlayListDelete</a>,SIGNAL(clicked()),<span class="keyword">this</span>,SLOT(<a class="code" href="classInfoArea.html#InfoAreai2">slotDeleteItems</a>()));
00072    <span class="comment">//DAVID Init PlayList Table</span>
00073    <a class="code" href="classInfoArea.html#InfoAread0">InitPlayList</a>();
00074    
00075    
00076 }
<a name="l00077"></a><a class="code" href="classInfoArea.html#InfoAread0">00077</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAread0">InfoArea::InitPlayList</a>()
00078 {
00079   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>=<span class="keyword">new</span> QListView(<span class="keyword">this</span>);
00080   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;addColumn( <span class="stringliteral">"Items"</span> );
00081   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;setColumnWidth(0,316);
00082   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;setRootIsDecorated( TRUE );
00083   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;setGeometry(35,60,316,420);
00084   
00085   QFont f( <span class="stringliteral">"Helvetica"</span>, 12, QFont::Bold );
00086   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;setFont( f );
00087   
00088   <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;show();
00089   connect(<a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>,SIGNAL(doubleClicked ( QListViewItem * )),<span class="keyword">this</span>,SLOT(<a class="code" href="classInfoArea.html#InfoAreai3">slotDoubleClicked</a>(QListViewItem* )));
00090   <a class="code" href="classInfoArea.html#InfoAreai1">ReadList</a>();
00091   <a class="code" href="classInfoArea.html#InfoAread1">InitSongInfo</a>();
00092   
00093 }
00094 
00095 
00096 
<a name="l00097"></a><a class="code" href="classInfoArea.html#InfoAreai0">00097</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAreai0">InfoArea::slotReadListFromPlayList</a>(KURL::List playlist)
00098 { 
00099    <a class="code" href="classInfoArea.html#InfoAreao5">curr_list</a>=playlist;
00100    <span class="comment">//Clear ValueList</span>
00101    <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;clear();
00102    
00103    
00104    <span class="keywordflow">for</span>( KURL::List::ConstIterator it = playlist.begin();it != playlist.end();it++)
00105    {
00106     <span class="comment">//Add to value list</span>
00107     qWarning((*it).fileName());
00108      <span class="keyword">new</span> <a class="code" href="classHDASSPlayListItem.html">HDASSPlayListItem</a>( <a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>,(*it).fileName());
00109    }
00110 }
00111 
<a name="l00112"></a><a class="code" href="classInfoArea.html#InfoAreai1">00112</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAreai1">InfoArea::ReadList</a>()
00113 {
00114       emit <a class="code" href="classInfoArea.html#InfoAreal0">signalReadList</a>();
00115 }
<a name="l00116"></a><a class="code" href="classInfoArea.html#InfoAreai2">00116</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAreai2">InfoArea::slotDeleteItems</a>()
00117 {
00118         KURL::List remove_list;
00119         <span class="keywordtype">int</span> i=0;
00120         <a class="code" href="classHDASSPlayListItem.html">HDASSPlayListItem</a> *CurChild=(<a class="code" href="classHDASSPlayListItem.html">HDASSPlayListItem</a>*)<a class="code" href="classInfoArea.html#InfoAreao4">PlayList</a>-&gt;firstChild();
00121         <span class="keywordflow">for</span>(KURL::List::ConstIterator remove_it = <a class="code" href="classInfoArea.html#InfoAreao5">curr_list</a>.begin();remove_it != <a class="code" href="classInfoArea.html#InfoAreao5">curr_list</a>.end();remove_it++,i++)
00122         {
00123                 <span class="keywordflow">if</span>(CurChild-&gt;isSelected ())
00124                 
00125                 {
00126                         remove_list &lt;&lt;(*remove_it).url();
00127                 }
00128                 CurChild=(<a class="code" href="classHDASSPlayListItem.html">HDASSPlayListItem</a>*)CurChild-&gt;nextSibling();
00129         }
00130         emit <a class="code" href="classInfoArea.html#InfoAreal1">signalRemoveList</a>(remove_list,<a class="code" href="enum_8h.html#a24a17">em_remove</a>);
00131 }
00132 
<a name="l00133"></a><a class="code" href="classInfoArea.html#InfoAreai3">00133</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAreai3">InfoArea::slotDoubleClicked</a>(QListViewItem * item )
00134 {
00135    <a class="code" href="classHDASSPlayListItem.html">HDASSPlayListItem</a> *clickitem=(<a class="code" href="classHDASSPlayListItem.html">HDASSPlayListItem</a> *)item;
00136    qWarning(<span class="stringliteral">"DoubleClikced"</span>);
00137    emit <a class="code" href="classInfoArea.html#InfoAreal2">signalPlayItem</a>(clickitem-&gt;text(0));
00138    emit <a class="code" href="classInfoArea.html#InfoAreal3">singalPlayItem</a>();
00139  
00140 }
<a name="l00141"></a><a class="code" href="classInfoArea.html#InfoAread1">00141</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAread1">InfoArea::InitSongInfo</a>()
00142 {
00143    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>=<span class="keyword">new</span> QLabel(<span class="keyword">this</span>);
00144    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>-&gt;setPaletteBackgroundColor(QColor(255,255,255));
00145    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>-&gt;hide();
00146    
00147    Album=<span class="keyword">new</span> QLabel(<span class="keyword">this</span>);
00148    Album-&gt;setPaletteBackgroundColor(QColor(255,255,255));
00149    Album-&gt;hide();
00150    
00151    <a class="code" href="classInfoArea.html#InfoArear7">BitRate</a>=<span class="keyword">new</span> QLabel(<span class="keyword">this</span>);
00152    <a class="code" href="classInfoArea.html#InfoArear7">BitRate</a>-&gt;setPaletteBackgroundColor(QColor(255,255,255));
00153    <a class="code" href="classInfoArea.html#InfoArear7">BitRate</a>-&gt;hide();
00154    
00155    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>=<span class="keyword">new</span> QLabel(<span class="keyword">this</span>);
00156    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;setPaletteBackgroundColor(QColor(255,255,255));
00157    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;hide();
00158    
00159    
00160    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>-&gt;move(420,210);
00161    Album-&gt;move(420,240);
00162    <a class="code" href="classInfoArea.html#InfoArear7">BitRate</a>-&gt;move(420,270);
00163    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;move(580,270);
00164    
00165    QFont f( <span class="stringliteral">"Helvetica"</span>, 14, QFont::Bold );
00166    
00167    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>-&gt;setFont( f );
00168    Album-&gt;setFont( f );
00169    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;setFont( f );
00170    <a class="code" href="classInfoArea.html#InfoArear7">BitRate</a>-&gt;setFont( f );
00171    
00172 } 
<a name="l00173"></a><a class="code" href="classInfoArea.html#InfoAread2">00173</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAread2">InfoArea::ShowSongInfo</a>(<span class="keywordtype">int</span> m_length,<span class="keywordtype">int</span> m_bitrate,QString m_title,QString m_artist,QString m_album)
00174 {
00175 
00176 }
<a name="l00177"></a><a class="code" href="classInfoArea.html#InfoAreai4">00177</a> <span class="keywordtype">void</span> <a class="code" href="classInfoArea.html#InfoAreai4">InfoArea::slotHadleSongInfo</a>(<span class="keywordtype">int</span> m_length,<span class="keywordtype">int</span> m_bitrate,QString m_title,QString m_artist,QString m_album)
00178 {
00179    QString strArtist=QString(<span class="stringliteral">"Artist :"</span>) +(m_artist.isEmpty()?QString(<span class="stringliteral">" No Info"</span>):m_artist);
00180    QString strTitle=(m_title.isEmpty()?QString(<span class="stringliteral">" No Info"</span>):m_title);
00181    QString strAlbum=QString(<span class="stringliteral">"Album :"</span>) +(m_album.isEmpty()?QString(<span class="stringliteral">" No Info"</span>):m_album);
00182    
00183    QFont f( <span class="stringliteral">"Helvetica"</span>, 14, QFont::Bold );
00184    QFontMetrics fm(f);
00185    
00186    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>-&gt;resize(fm.width(strArtist),fm.height());
00187    <a class="code" href="classInfoArea.html#InfoArear2">Artist</a>-&gt;setText(strArtist);
00188    
00189    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;move(580-fm.width(strTitle)/2,<a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;y());
00190    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;resize(fm.width(strTitle),fm.height());
00191    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;setText(strTitle);
00192    
00193    Album-&gt;resize(fm.width(strTitle),fm.height());
00194    Album-&gt;setText(strAlbum);
00195    
00196    <a class="code" href="classInfoArea.html#InfoArear7">BitRate</a>-&gt;setText(QString(<span class="stringliteral">"BitRate : %1 "</span>).arg(m_bitrate));
00197     
00198    <span class="comment">//Artist-&gt;show();</span>
00199   <span class="comment">// Album-&gt;show();</span>
00200    <span class="comment">//BitRate-&gt;show();</span>
00201    <a class="code" href="classInfoArea.html#InfoArear6">Title</a>-&gt;show();
00202 
00203    
00204 }
00205 
00206 <span class="preprocessor">#include "<a class="code" href="infoarea_8moc.html">infoarea.moc</a>"</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri May 13 16:53:36 2005 for HDASS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
