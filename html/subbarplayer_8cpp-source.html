<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HDASS: subbarplayer.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>subbarplayer.cpp</h1><a href="subbarplayer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment"> *   Copyright (C) 2005 by sonicat                                         *</span>
00003 <span class="comment"> *   is87098@cis.nctu.edu.tw                                               *</span>
00004 <span class="comment"> *                                                                         *</span>
00005 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00006 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
00007 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
00008 <span class="comment"> *   (at your option) any later version.                                   *</span>
00009 <span class="comment"> *                                                                         *</span>
00010 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
00011 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
00012 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
00013 <span class="comment"> *   GNU General Public License for more details.                          *</span>
00014 <span class="comment"> *                                                                         *</span>
00015 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
00016 <span class="comment"> *   along with this program; if not, write to the                         *</span>
00017 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
00018 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
00019 <span class="comment"> ***************************************************************************/</span>
00020 <span class="preprocessor">#include "<a class="code" href="subbarplayer_8h.html">subbarplayer.h</a>"</span>
00021 <span class="preprocessor">#include &lt;kdebug.h&gt;</span>
00022 <a class="code" href="classSubBarPlayer.html#SubBarPlayera0">SubBarPlayer::SubBarPlayer</a>(<a class="code" href="classQWidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00023  : <a class="code" href="classQWidget.html">QWidget</a>(parent, name)
00024 {
00025   <span class="comment">//new Player here</span>
00026   <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>=<span class="keyword">new</span> <a class="code" href="classMyplayer.html">Myplayer</a>;
00027  
00028   <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">true</span>;
00029   <a class="code" href="classSubBarPlayer.html#SubBarPlayera2">xSetup</a>();
00030 }
00031 
00032 
00033 <a class="code" href="classSubBarPlayer.html#SubBarPlayera1">SubBarPlayer::~SubBarPlayer</a>()
00034 {
00035   <span class="keyword">delete</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>;
00036 }
00037 
00038 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayera2">SubBarPlayer::xSetup</a>()
00039 {
00040    <span class="comment">//DAVID Setup Background;</span>
00041    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr0">pixBackground</a>.load(<span class="stringliteral">"/root/kde_application/hdass08/skin/SubBarBackground.png"</span>);
00042    setBackgroundPixmap(pixBackground);
00043    
00044    <span class="comment">//DAVID Load BtnGraphic</span>
00045    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[0]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Previous.png"</span>);
00046    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[1]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Previous-Active.png"</span>);
00047    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[2]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Play.png"</span>);
00048    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[3]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Play-Active.png"</span>);
00049    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[4]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Pause.png"</span>);
00050    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[5]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Pause-Active.png"</span>);
00051    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[6]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Next.png"</span>);
00052    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr1">BtnGraphic</a>[7]=<span class="keyword">new</span> QPixmap(<span class="stringliteral">"/root/kde_application/hdass08/skin/Bar-Player-Btn-Next-Active.png"</span>);
00053   
00054    
00055    <a class="code" href="classSubBarPlayer.html#SubBarPlayero6">SubBtnPlayer_PlayNPause</a> =<span class="keyword">new</span> <a class="code" href="classSkinButton.html">SkinButton</a>(<span class="keyword">this</span>);
00056    <a class="code" href="classSubBarPlayer.html#SubBarPlayero7">SubBtnPlayer_Backword</a>     =<span class="keyword">new</span> SkinButton(<span class="keyword">this</span>);
00057    <a class="code" href="classSubBarPlayer.html#SubBarPlayero8">SubBtn_Forward</a>                =<span class="keyword">new</span> SkinButton(<span class="keyword">this</span>);
00058    
00059    <a class="code" href="classSubBarPlayer.html#SubBarPlayero7">SubBtnPlayer_Backword</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(BtnGraphic[0],BtnGraphic[1]);
00060    <a class="code" href="classSubBarPlayer.html#SubBarPlayero7">SubBtnPlayer_Backword</a>-&gt;setGeometry(336,0,60,80);
00061    <a class="code" href="classSubBarPlayer.html#SubBarPlayero7">SubBtnPlayer_Backword</a>-&gt;show();
00062    
00063    <a class="code" href="classSubBarPlayer.html#SubBarPlayero6">SubBtnPlayer_PlayNPause</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(BtnGraphic[2],BtnGraphic[3]);
00064    <a class="code" href="classSubBarPlayer.html#SubBarPlayero6">SubBtnPlayer_PlayNPause</a>-&gt;setGeometry(403,0,80,80);
00065    <a class="code" href="classSubBarPlayer.html#SubBarPlayero6">SubBtnPlayer_PlayNPause</a>-&gt;show();
00066    
00067    <a class="code" href="classSubBarPlayer.html#SubBarPlayero8">SubBtn_Forward</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(BtnGraphic[6],BtnGraphic[7]);
00068    <a class="code" href="classSubBarPlayer.html#SubBarPlayero8">SubBtn_Forward</a>-&gt;setGeometry(484,0,60,80);
00069    <a class="code" href="classSubBarPlayer.html#SubBarPlayero8">SubBtn_Forward</a>-&gt;show();
00070    
00071    <span class="comment">//DAVID Pos Slider</span>
00072    <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a> = <span class="keyword">new</span> QSlider(0,100,1,0,Qt::Horizontal,<span class="keyword">this</span>);
00073    <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;setGeometry( QRect(10,39,300,15) );
00074    <span class="comment">//playerPosition-&gt;show();</span>
00075    
00076    
00077    QObject::connect(SubBtnPlayer_PlayNPause, SIGNAL(clicked()), m_player, SLOT(play()));
00078    QObject::connect(SubBtnPlayer_PlayNPause,SIGNAL(clicked()),<span class="keyword">this</span>,SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri14">ChangeBtnPlayPauseGraphic</a>()));
00079    QObject::connect(SubBtn_Forward, SIGNAL(clicked()), m_player, SLOT(next()));
00080    QObject::connect(SubBtnPlayer_Backword, SIGNAL(clicked()), m_player, SLOT(previous()));
00081 
00082    <a class="code" href="classSubBarPlayer.html#SubBarPlayerr2">state</a>=<a class="code" href="classSubBarPlayer.html#SubBarPlayery3SubBarPlayery1">SubBarPlayer::GO</a>;
00083    
00084    connect(m_player, SIGNAL(positionMessage(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri0">handlePosition</a>(<span class="keywordtype">int</span> )));
00085    connect(m_player,SIGNAL(trackMessage(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>, QString, QString, QString )),<span class="keyword">this</span>,SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri10">handleMessage</a>(<span class="keywordtype">int</span>, <span class="keywordtype">int</span>, QString, QString, QString )));
00086    connect(playerPosition, SIGNAL(sliderPressed()), <span class="keyword">this</span>, SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri3">handleSliderPressed</a>()));
00087    connect(playerPosition, SIGNAL(sliderReleased()), <span class="keyword">this</span>, SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri2">handleSliderReleased</a>()));
00088    
00089     <a class="code" href="classSubBarPlayer.html#SubBarPlayero2">forwardTimer</a> = <span class="keyword">new</span> QTimer( <span class="keyword">this</span> ); <span class="comment">// create internal timer</span>
00090     connect( forwardTimer, SIGNAL(timeout()),<span class="keyword">this</span>, SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri8">handleForward</a>()) );
00091 
00092     
00093     <a class="code" href="classSubBarPlayer.html#SubBarPlayero3">backwardTimer</a> = <span class="keyword">new</span> QTimer( <span class="keyword">this</span> );
00094     connect( backwardTimer, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(<a class="code" href="classSubBarPlayer.html#SubBarPlayeri9">handleBackward</a>()) );
00095     
00096     <a class="code" href="classSubBarPlayer.html#SubBarPlayeri16">slotReadList</a>();
00097 }
00098 
00099 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri14">SubBarPlayer::ChangeBtnPlayPauseGraphic</a>()
00100 {
00101   <span class="keywordflow">if</span>(<a class="code" href="classSubBarPlayer.html#SubBarPlayerr2">state</a>==<a class="code" href="classSubBarPlayer.html#SubBarPlayery3SubBarPlayery0">SubBarPlayer::PAUSE</a>)
00102   {
00103     <a class="code" href="classSubBarPlayer.html#SubBarPlayerr2">state</a>=<a class="code" href="classSubBarPlayer.html#SubBarPlayery3SubBarPlayery1">SubBarPlayer::GO</a>;
00104     <a class="code" href="classSubBarPlayer.html#SubBarPlayero6">SubBtnPlayer_PlayNPause</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(BtnGraphic[2],BtnGraphic[3]);
00105   }
00106   <span class="keywordflow">else</span>
00107   {
00108     <a class="code" href="classSubBarPlayer.html#SubBarPlayerr2">state</a>=<a class="code" href="classSubBarPlayer.html#SubBarPlayery3SubBarPlayery0">SubBarPlayer::PAUSE</a>;
00109     <a class="code" href="classSubBarPlayer.html#SubBarPlayero6">SubBtnPlayer_PlayNPause</a>-&gt;<a class="code" href="classSkinButton.html#SkinButtona2">setPixmaps</a>(BtnGraphic[4],BtnGraphic[5]);
00110   }
00111 }
00112 
00113 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri11">SubBarPlayer::insertMedia</a>(KURL::List list)
00114 {
00115      
00116      <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri17">add</a>(list);
00117      <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri12">handleRepeat</a>(<span class="keyword">true</span>);
00118      kdDebug() &lt;&lt; <span class="stringliteral">"[playercontrol]insertMedia "</span>&lt;&lt; endl; 
00119      
00120 }
00121 
00122 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri12">SubBarPlayer::removeMedia</a>( KURL::List remove_list)
00123 {
00124      <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri19">removeMedia</a>(remove_list); 
00125 }
00126 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri13">SubBarPlayer::initMedia</a>(KURL::List list)
00127 {
00128         <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri16">initlist</a>(list);
00129         <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri12">handleRepeat</a>(<span class="keyword">false</span>);
00130         kdDebug() &lt;&lt; <span class="stringliteral">"[playercontrol]initMedia "</span>&lt;&lt; endl; 
00131 }
00132 
00133 
00134 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri0">SubBarPlayer::handlePosition</a>(<span class="keywordtype">int</span> position)
00135 {
00136 
00137      <span class="keywordflow">if</span>(<a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a>)<a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;setValue(position);    
00138 }
00139 
00140 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri1">SubBarPlayer::handleVolume</a>(<span class="keywordtype">int</span> volume)
00141 {
00142 }
00143 
00144 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri2">SubBarPlayer::handleSliderReleased</a>()
00145 {
00146      <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri14">handleSlider</a>(<a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;value());
00147      <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">true</span>;   
00148 }
00149 
00150 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri3">SubBarPlayer::handleSliderPressed</a>()
00151 {
00152      <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">false</span>;
00153 }
00154 
00155 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri4">SubBarPlayer::handleNextPressed</a>()
00156 {
00157      kdDebug() &lt;&lt; <span class="stringliteral">"Next Pressed"</span>&lt;&lt; endl;
00158      <a class="code" href="classSubBarPlayer.html#SubBarPlayero2">forwardTimer</a>-&gt;start( 100 );
00159      <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">false</span>;
00160      
00161 }
00162 
00163 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri5">SubBarPlayer::handleNextReleased</a>()
00164 {
00165      kdDebug() &lt;&lt; <span class="stringliteral">"Next Released"</span> &lt;&lt; endl;
00166      <a class="code" href="classSubBarPlayer.html#SubBarPlayero2">forwardTimer</a>-&gt;stop();
00167      <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri14">handleSlider</a>(<a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;value());
00168      <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">true</span>;
00169 }
00170 
00171 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri8">SubBarPlayer::handleForward</a>()
00172 {
00173      kdDebug() &lt;&lt; <span class="stringliteral">"[UI::handleForward]"</span> &lt;&lt; endl;
00174      <span class="keywordtype">int</span> fast = <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;value();
00175      fast++;
00176      <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;setValue(fast);
00177 <span class="comment">//     Pos-&gt;setNum(fast);</span>
00178 }
00179 
00180 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri6">SubBarPlayer::handlePreviousPressed</a>()
00181 {
00182      kdDebug() &lt;&lt; <span class="stringliteral">"Previous Pressed"</span>&lt;&lt; endl;
00183      <a class="code" href="classSubBarPlayer.html#SubBarPlayero3">backwardTimer</a>-&gt;start( 100 );
00184      <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">false</span>;
00185 }
00186 
00187 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri7">SubBarPlayer::handlePreviousReleased</a>()
00188 {
00189      kdDebug() &lt;&lt; <span class="stringliteral">"Previous Released"</span> &lt;&lt; endl;
00190      <a class="code" href="classSubBarPlayer.html#SubBarPlayero3">backwardTimer</a>-&gt;stop();
00191      <a class="code" href="classSubBarPlayer.html#SubBarPlayero4">m_player</a>-&gt;<a class="code" href="classMyplayer.html#Myplayeri14">handleSlider</a>(<a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;value());
00192      <a class="code" href="classSubBarPlayer.html#SubBarPlayerr3">slider</a> = <span class="keyword">true</span>;
00193 }
00194 
00195 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri9">SubBarPlayer::handleBackward</a>()
00196 {
00197      kdDebug() &lt;&lt; <span class="stringliteral">"[UI::handleBackward]"</span> &lt;&lt; endl;
00198      <span class="keywordtype">int</span> fast = <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;value();
00199      fast--;
00200      <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;setValue(fast);
00201 }
00202 
00203 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri10">SubBarPlayer::handleMessage</a>(<span class="keywordtype">int</span> m_length,<span class="keywordtype">int</span> m_bitrate,QString m_title,QString m_artist,QString m_album)
00204 {
00205         <a class="code" href="classSubBarPlayer.html#SubBarPlayero1">playerPosition</a>-&gt;setMaxValue(m_length);
00206 }
00207 
00208 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri15">SubBarPlayer::slotReceivePL</a>(KURL::List list)
00209 {
00210   <a class="code" href="classSubBarPlayer.html#SubBarPlayero5">receive_list</a>=list;
00211 }
00212  
00213 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri16">SubBarPlayer::slotReadList</a>()
00214 {
00215    emit <a class="code" href="classSubBarPlayer.html#SubBarPlayerl0">signalRequestPL</a>();
00216   <span class="comment">//insertMedia(receive_list);</span>
00217 }
00218 <span class="keywordtype">void</span> <a class="code" href="classSubBarPlayer.html#SubBarPlayeri17">SubBarPlayer::slotClickFromPlayList</a>()
00219 {
00220   <a class="code" href="classSubBarPlayer.html#SubBarPlayerr2">state</a>=<a class="code" href="classSubBarPlayer.html#SubBarPlayery3SubBarPlayery1">SubBarPlayer::GO</a>;
00221   <a class="code" href="classSubBarPlayer.html#SubBarPlayeri14">ChangeBtnPlayPauseGraphic</a>();
00222 }
00223 <span class="preprocessor">#include "<a class="code" href="subbarplayer_8moc.html">subbarplayer.moc</a>"</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri May 13 16:53:37 2005 for HDASS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
