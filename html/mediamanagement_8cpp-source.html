<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HDASS: mediamanagement.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>mediamanagement.cpp</h1><a href="mediamanagement_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/***************************************************************************</span>
00002 <span class="comment"> *   Copyright (C) 2004 by root                                            *</span>
00003 <span class="comment"> *   root@colicoli                                                         *</span>
00004 <span class="comment"> *                                                                         *</span>
00005 <span class="comment"> *   This program is free software; you can redistribute it and/or modify  *</span>
00006 <span class="comment"> *   it under the terms of the GNU General Public License as published by  *</span>
00007 <span class="comment"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
00008 <span class="comment"> *   (at your option) any later version.                                   *</span>
00009 <span class="comment"> *                                                                         *</span>
00010 <span class="comment"> *   This program is distributed in the hope that it will be useful,       *</span>
00011 <span class="comment"> *   but WITHOUT ANY WARRANTY; without even the implied warranty of        *</span>
00012 <span class="comment"> *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         *</span>
00013 <span class="comment"> *   GNU General Public License for more details.                          *</span>
00014 <span class="comment"> *                                                                         *</span>
00015 <span class="comment"> *   You should have received a copy of the GNU General Public License     *</span>
00016 <span class="comment"> *   along with this program; if not, write to the                         *</span>
00017 <span class="comment"> *   Free Software Foundation, Inc.,                                       *</span>
00018 <span class="comment"> *   59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.             *</span>
00019 <span class="comment"> ***************************************************************************/</span>
00020 <span class="preprocessor">#include "<a class="code" href="mediamanagement_8h.html">mediamanagement.h</a>"</span>
00021 <span class="preprocessor">#include &lt;kdebug.h&gt;</span>
<a name="l00022"></a><a class="code" href="classmediamanagement.html#mediamanagementa0">00022</a> <a class="code" href="classmediamanagement.html#mediamanagementa0">mediamanagement::mediamanagement</a>(<a class="code" href="classQWidget.html">QWidget</a> *parent, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
00023  : <a class="code" href="classQWidget.html">QWidget</a>(parent, name)
00024 {
00025     <a class="code" href="classmediamanagement.html#mediamanagementd0">xSetup</a>();
00026 }
00027 
00028 
<a name="l00029"></a><a class="code" href="classmediamanagement.html#mediamanagementa1">00029</a> <a class="code" href="classmediamanagement.html#mediamanagementa1">mediamanagement::~mediamanagement</a>()
00030 {
00031 }
00032 
<a name="l00033"></a><a class="code" href="classmediamanagement.html#mediamanagementd0">00033</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementd0">mediamanagement::xSetup</a>()
00034 {
00035   <span class="comment">//Initial here</span>
00036   <span class="comment">//DAVID set backgorund color.</span>
00037   setPaletteBackgroundColor(QColor(0,0,0));
00038   resize(750,500);
00039   <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a> = <span class="keyword">new</span> QSplitter( <span class="keyword">this</span> );
00040   
00041   <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>=<span class="keyword">new</span> <a class="code" href="classDirectoryView.html">DirectoryView</a>(<a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a>,<span class="stringliteral">"MusicDir"</span>,<span class="keyword">true</span>);
00042   <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>-&gt;addColumn( <span class="stringliteral">"Name"</span> );
00043   <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>-&gt;setTreeStepSize( 40 );
00044   <a class="code" href="classmediamanagement.html#mediamanagemento4">musicroot</a> = <span class="keyword">new</span> <a class="code" href="classDirectory.html">Directory</a>( <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>, <span class="stringliteral">"/data/Media/MP3/"</span> );
00045   
00046   <a class="code" href="classmediamanagement.html#mediamanagemento4">musicroot</a>-&gt;<a class="code" href="classDirectory.html#Directorya5">setOpen</a>( TRUE );
00047   <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a>-&gt;setResizeMode( <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>, QSplitter::KeepSize );
00048   <a class="code" href="classmediamanagement.html#mediamanagemento3">musicFIV</a> = <span class="keyword">new</span> <a class="code" href="classQtFileIconView.html">QtFileIconView</a>( <span class="stringliteral">"/"</span>, <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a> );
00049   <a class="code" href="classmediamanagement.html#mediamanagemento3">musicFIV</a>-&gt;setSelectionMode( QIconView::Extended );
00050   <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a>-&gt;setGeometry(0,0,width(),height());
00051   
00052   
00053    connect( <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>, SIGNAL( folderSelected( <span class="keyword">const</span> QString &amp; ) ),
00054              <a class="code" href="classmediamanagement.html#mediamanagemento3">musicFIV</a>, SLOT ( setDirectory( <span class="keyword">const</span> QString &amp; ) ) );
00055 
00057   <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a> = <span class="keyword">new</span> QSplitter( <span class="keyword">this</span> );
00058   
00059   <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>=<span class="keyword">new</span> DirectoryView(<a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>,<span class="stringliteral">"MusicDir"</span>,<span class="keyword">true</span>);
00060   <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>-&gt;addColumn( <span class="stringliteral">"Name"</span> );
00061   <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>-&gt;setTreeStepSize( 40 );
00062   <a class="code" href="classmediamanagement.html#mediamanagemento5">imgroot</a> = <span class="keyword">new</span> Directory( <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>, <span class="stringliteral">"/data/Media/IMAGES/"</span> );
00063   
00064   <a class="code" href="classmediamanagement.html#mediamanagemento5">imgroot</a>-&gt;<a class="code" href="classDirectory.html#Directorya5">setOpen</a>( TRUE );
00065   <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>-&gt;setResizeMode( <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>, QSplitter::KeepSize );
00066   <a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a> = <span class="keyword">new</span> QtFileIconView( <span class="stringliteral">"/"</span>, <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>,<span class="stringliteral">"imgFIV"</span>,Image );
00067   <a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>-&gt;setSelectionMode( QIconView::Extended );
00068   <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>-&gt;setGeometry(0,0,width(),height());
00069   <a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a> =<span class="keyword">new</span> <a class="code" href="classImageDetial.html">ImageDetial</a>(<span class="keyword">this</span>,<span class="stringliteral">"ImageDetail"</span>);
00070   <a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a>-&gt;setGeometry(0,0,width(),height());
00071   <a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a>-&gt;hide();
00072   
00073    connect( <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>, SIGNAL( folderSelected( <span class="keyword">const</span> QString &amp; ) ),
00074              <a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>, SLOT ( setDirectory( <span class="keyword">const</span> QString &amp; ) ) );
00075   
00076   <span class="comment">//DAVID Initial Album here    </span>
00077   <span class="comment">//DAVID connect the show image singal to the ImageDetial</span>
00078   connect(<a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>,SIGNAL(signalShowTheDetialofImage(KURL )),<a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a>,SLOT(slotShowFloder(KURL )));     
00079   connect(<a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>,SIGNAL(signalShowTheDetialofImage(KURL )),<span class="keyword">this</span>,SLOT(<a class="code" href="classmediamanagement.html#mediamanagementi5">slotShowImage</a>(KURL )));
00080   
00081   <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>-&gt;hide();
00082 
00083   <a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>=1;            
00084 }
<a name="l00085"></a><a class="code" href="classmediamanagement.html#mediamanagementi0">00085</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi0">mediamanagement::slotChangeMode</a>(<span class="keywordtype">int</span> mode)
00086 {
00087   <span class="comment">//DAVID Set Mode</span>
00088   <a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>=mode;
00089   <span class="keywordflow">if</span> (mode==0)<span class="comment">//Image</span>
00090   {
00091       <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>-&gt;show();
00092       <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a>-&gt;hide();
00093       <a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a>-&gt;hide();
00094   }
00095   <span class="keywordflow">if</span>(mode==1)
00096   {
00097       <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>-&gt;hide();
00098       <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a>-&gt;show();
00099       <a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a>-&gt;hide();
00100   }
00101   <span class="keywordflow">if</span>(mode==2)
00102   {
00103      <a class="code" href="classmediamanagement.html#mediamanagementr0">imagesplitter</a>-&gt;hide();
00104      <a class="code" href="classmediamanagement.html#mediamanagementr1">musicsplitter</a>-&gt;hide();
00105      <a class="code" href="classmediamanagement.html#mediamanagemento6">imgdetial</a>-&gt;show();
00106   }
00107 }
<a name="l00108"></a><a class="code" href="classmediamanagement.html#mediamanagementi1">00108</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi1">mediamanagement::slotDeleteItem</a>()
00109 {
00110         <span class="comment">//qWarning("MediaManagement::slotDeleteItem()");</span>
00111         <span class="comment">//DAVID Check Mode</span>
00112         kdDebug()&lt;&lt;<span class="stringliteral">"Mode:"</span>&lt;&lt;<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>;
00113         <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==0)<span class="comment">//Image</span>
00114         {
00115                  <span class="comment">//check active area  musicDir or musicFIV</span>
00116                 <span class="comment">//Delete Image Current QFileIconViewItem</span>
00117                 <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>-&gt;hasFocus())
00118                 {
00119                         qWarning(<span class="stringliteral">"---------------1"</span>);
00120                         <a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>-&gt;<a class="code" href="classQtFileIconView.html#QtFileIconViewi4">slotDeletCurrItem</a>();
00121                         <a class="code" href="classmediamanagement.html#mediamanagemento2">imgFIV</a>-&gt;repaint();
00122                 }
00123                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>-&gt;hasFocus())
00124                 {
00125                         qWarning(<span class="stringliteral">"----------------2"</span>);
00126                         <a class="code" href="classDirectory.html">Directory</a> *dir;
00127                         <span class="keywordflow">for</span>(dir=(<a class="code" href="classDirectory.html">Directory</a> *)<a class="code" href="classmediamanagement.html#mediamanagemento5">imgroot</a>-&gt;firstChild();dir;dir=(<a class="code" href="classDirectory.html">Directory</a> *)dir-&gt;nextSibling())
00128                         {
00129                           <span class="keywordflow">if</span>(dir-&gt;isSelected())
00130                           {
00131                                 qWarning(dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>());
00132                                 QDir temp(dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>());
00133                                 <span class="keyword">const</span> QFileInfoList* fileinfolist = temp.entryInfoList();
00134                                 <span class="keywordflow">if</span>(fileinfolist) 
00135                                 {
00136                                         QFileInfoListIterator it(*fileinfolist);
00137                                         QFileInfo* fi;
00138                                         <span class="keywordflow">while</span>((fi = it.current()) != 0)
00139                                         {
00140                                                 <span class="keywordflow">if</span>(fi-&gt;fileName() != <span class="stringliteral">"."</span> &amp;&amp; fi-&gt;fileName() != <span class="stringliteral">".."</span>) 
00141                                                 temp.remove(fi-&gt;absFilePath(),<span class="keyword">true</span>);
00142                                                 ++it;
00143                                         }
00144                                 }       
00145                                 temp.cdUp();
00146                                 temp.rmdir(dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>());
00147                                 <span class="comment">//f.remove();</span>
00148                                 <span class="keyword">delete</span> dir;
00149                           }
00150                         }
00151                 }
00152         }
00153         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==1)<span class="comment">//music</span>
00154         {
00155                 <span class="comment">//Delete music Current QFileIconViewItem</span>
00156                 qWarning(<span class="stringliteral">"Mode 1"</span>);
00157                 <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagemento3">musicFIV</a>-&gt;hasFocus())
00158                 {
00159                         qWarning(<span class="stringliteral">"----------------3"</span>);
00160                         <a class="code" href="classmediamanagement.html#mediamanagemento3">musicFIV</a>-&gt;<a class="code" href="classQtFileIconView.html#QtFileIconViewi4">slotDeletCurrItem</a>();
00161                         <a class="code" href="classmediamanagement.html#mediamanagemento3">musicFIV</a>-&gt;repaint();
00162                 }
00163                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>-&gt;hasFocus())
00164                 {
00165                         qWarning(<span class="stringliteral">"----------------4"</span>);
00166                         <a class="code" href="classDirectory.html">Directory</a> *dir;
00167                         <span class="keywordflow">for</span>(dir=(<a class="code" href="classDirectory.html">Directory</a> *)<a class="code" href="classmediamanagement.html#mediamanagemento4">musicroot</a>-&gt;firstChild();dir;dir=(<a class="code" href="classDirectory.html">Directory</a> *)dir-&gt;nextSibling())
00168                         {
00169                           <span class="keywordflow">if</span>(dir-&gt;isSelected())
00170                           {
00171                                 qWarning(dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>());
00172                                 QDir temp(dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>());
00173                                 <span class="keyword">const</span> QFileInfoList* fileinfolist = temp.entryInfoList();
00174                                 <span class="keywordflow">if</span>(fileinfolist) 
00175                                 {
00176                                         QFileInfoListIterator it(*fileinfolist);
00177                                         QFileInfo* fi;
00178                                         <span class="keywordflow">while</span>((fi = it.current()) != 0)
00179                                         {
00180                                                 <span class="keywordflow">if</span>(fi-&gt;fileName() != <span class="stringliteral">"."</span> &amp;&amp; fi-&gt;fileName() != <span class="stringliteral">".."</span>) 
00181                                                 temp.remove(fi-&gt;absFilePath(),<span class="keyword">true</span>);
00182                                                 ++it;
00183                                         }
00184                                 }       
00185                                 temp.cdUp();
00186                                 temp.rmdir(dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>());
00187                                 <span class="comment">//f.remove();</span>
00188                                 <span class="keyword">delete</span> dir;
00189                           }
00190                         }
00191                         
00192                 }
00193         }
00194 }
<a name="l00195"></a><a class="code" href="classmediamanagement.html#mediamanagementi2">00195</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi2">mediamanagement::slotMkdir</a>(QString dirname)
00196 {       
00197         <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==0)<span class="comment">//Image</span>
00198         {
00199                 <span class="comment">//DAVID MKdir Current QFileIconViewItem</span>
00200                 qWarning(<span class="stringliteral">"mediamanagement::slotMkdir()::Image!!!"</span>);
00201                 <a class="code" href="classmediamanagement.html#mediamanagemento5">imgroot</a>-&gt;<a class="code" href="classDirectory.html#Directorya9">Mkdir</a>(dirname);
00202                 <a class="code" href="classmediamanagement.html#mediamanagemento0">imgDir</a>-&gt;repaint();
00203                 
00204         }
00205         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==1)<span class="comment">//music</span>
00206         {
00207                 <span class="comment">//Delete music Current QFileIconViewItem</span>
00208                 qWarning(<span class="stringliteral">"mediamanagement::slotMkdir()::music!!!"</span>);
00209                 <a class="code" href="classmediamanagement.html#mediamanagemento4">musicroot</a>-&gt;<a class="code" href="classDirectory.html#Directorya9">Mkdir</a>(dirname);
00210                 <a class="code" href="classmediamanagement.html#mediamanagemento1">musicDir</a>-&gt;repaint();
00211         }
00212 }
00213 
<a name="l00214"></a><a class="code" href="classmediamanagement.html#mediamanagementi4">00214</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi4">mediamanagement::slotPaste</a>()
00215 {
00216         <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==0)<span class="comment">// image </span>
00217         {
00218                 qWarning(<span class="stringliteral">"mediamanagement::slotPaste()::image"</span>);
00219         }
00220         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==1)<span class="comment">//music</span>
00221         {
00222                 qWarning(<span class="stringliteral">"mediamanagement::slotPaste()::music"</span>);
00223         }
00224 }
<a name="l00225"></a><a class="code" href="classmediamanagement.html#mediamanagementi3">00225</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi3">mediamanagement::slotCut</a>()
00226 {
00227         <span class="keywordflow">if</span>(<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==0)<span class="comment">//image</span>
00228         {
00229                 qWarning(<span class="stringliteral">"mediamanagement::slotCut()::image!!"</span>);
00230         }
00231         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classmediamanagement.html#mediamanagementr2">Mode</a>==1)<span class="comment">//music</span>
00232         {
00233                 qWarning(<span class="stringliteral">"mediamanagement::slotCut()::music!!"</span>);
00234         }
00235 }
00236 <span class="comment">//*************************************************************************************</span>
00237 <span class="comment">//This function hide the splitter</span>
00238 <span class="comment">//</span>
00239 <span class="comment">//*************************************************************************************</span>
<a name="l00240"></a><a class="code" href="classmediamanagement.html#mediamanagementi5">00240</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi5">mediamanagement::slotShowImage</a>(KURL url)
00241 {
00242         <span class="comment">//Set Image</span>
00243         <span class="comment">//DAVID change the mode to the image mode</span>
00244         <a class="code" href="classmediamanagement.html#mediamanagementi0">slotChangeMode</a>(2);
00245         emit <a class="code" href="classmediamanagement.html#mediamanagementl0">signalImageDetial</a>();
00246         
00247 }
<a name="l00248"></a><a class="code" href="classmediamanagement.html#mediamanagementi6">00248</a> <span class="keywordtype">void</span> <a class="code" href="classmediamanagement.html#mediamanagementi6">mediamanagement::slotBackToManagement</a>()
00249 {
00250         <a class="code" href="classmediamanagement.html#mediamanagementi0">slotChangeMode</a>(0);
00251 }
00252 
00253 <span class="preprocessor">#include "<a class="code" href="mediamanagement_8moc.html">mediamanagement.moc</a>"</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri May 13 16:53:36 2005 for HDASS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
