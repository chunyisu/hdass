<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HDASS: PluginManager class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>PluginManager Class Reference</h1><code>#include &lt;<a class="el" href="pluginmanager_8h-source.html">pluginmanager.h</a>&gt;</code>
<p>
<a href="classPluginManager-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>KTrader::OfferList&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagere0">query</a> (const QString &amp;constraint=QString::null)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classPlugin.html">Plugin</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagere1">createFromQuery</a> (const QString &amp;constraint=QString::null)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classPlugin.html">Plugin</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagere2">createFromService</a> (const KService::Ptr service)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagere3">unload</a> (<a class="el" href="classPlugin.html">Plugin</a> *plugin)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>KService::Ptr&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagere4">getService</a> (const <a class="el" href="classPlugin.html">Plugin</a> *plugin)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagere5">dump</a> (const KService::Ptr service)</td></tr>

<tr><td colspan=2><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>const int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagers0">FrameworkVersion</a> = 2</td></tr>

<tr><td colspan=2><br><h2>Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>vector&lt; <a class="el" href="structPluginManager_1_1StoreItem.html">StoreItem</a> &gt;::iterator&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagerh0">lookupPlugin</a> (const <a class="el" href="classPlugin.html">Plugin</a> *plugin)</td></tr>

<tr><td colspan=2><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>vector&lt; <a class="el" href="structPluginManager_1_1StoreItem.html">StoreItem</a> &gt;&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classPluginManager.html#PluginManagerv0">m_store</a></td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="PluginManagere1" doxytag="PluginManager::createFromQuery" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classPlugin.html">Plugin</a> * PluginManager::createFromQuery </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>constraint</em> = QString::null          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load and instantiate plugin from query <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>constraint</em>&nbsp;</td><td>A constraint to limit the choices returned, QString::null to get all services of the given <code>servicetype</code> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Pointer to <a class="el" href="classPlugin.html">Plugin</a>, or NULL if error </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a href="http://developer.kde.org/documentation/library/kdeqt/tradersyntax.html">http://developer.kde.org/documentation/library/kdeqt/tradersyntax.html</a> </dd></dl>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00051">51</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
References <a class="el" href="pluginmanager_8cpp-source.html#l00065">createFromService()</a>, and <a class="el" href="pluginmanager_8cpp-source.html#l00037">query()</a>.
<p>
<div class="fragment"><pre>00052 {
00053     KTrader::OfferList offers = <a class="code" href="classPluginManager.html#PluginManagere0">query</a>( constraint );
00054 
00055     <span class="keywordflow">if</span> ( offers.isEmpty() ) {
00056         kdWarning() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"No matching plugin found.\n"</span>;                                          
00057         <span class="keywordflow">return</span> 0;
00058     }
00059                 
00060     <span class="keywordflow">return</span> <a class="code" href="classPluginManager.html#PluginManagere2">createFromService</a>( *offers.begin() );    
00061 }
</pre></div>    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classPluginManager_PluginManagere1_cgraph.png" border="0" usemap="#classPluginManager_PluginManagere1_cgraph_map" alt=""></center>
<map name="classPluginManager_PluginManagere1_cgraph_map">
<area href="classPluginManager.html#PluginManagere2" shape="rect" coords="280,8,512,32" alt="">
<area href="classPluginManager.html#PluginManagere0" shape="rect" coords="320,56,472,80" alt="">
<area href="classPluginManager.html#PluginManagere5" shape="rect" coords="560,8,712,32" alt="">
</map>
<a class="anchor" name="PluginManagere2" doxytag="PluginManager::createFromService" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classPlugin.html">Plugin</a> * PluginManager::createFromService </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const KService::Ptr&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>service</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Load and instantiate plugin from service <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>service</em>&nbsp;</td><td>Pointer to KService </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Pointer to <a class="el" href="classPlugin.html">Plugin</a>, or NULL if error </dd></dl>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00065">65</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
References <a class="el" href="pluginmanager_8cpp-source.html#l00140">dump()</a>, <a class="el" href="pluginmanager_8h-source.html#l00097">PluginManager::StoreItem::library</a>, <a class="el" href="pluginmanager_8cpp-source.html#l00029">m_store</a>, <a class="el" href="pluginmanager_8h-source.html#l00096">PluginManager::StoreItem::plugin</a>, and <a class="el" href="pluginmanager_8h-source.html#l00098">PluginManager::StoreItem::service</a>.
<p>
Referenced by <a class="el" href="pluginmanager_8cpp-source.html#l00051">createFromQuery()</a>.
<p>
<div class="fragment"><pre>00066 {
00067     kdDebug() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"Trying to load: "</span> &lt;&lt; service-&gt;library() &lt;&lt; endl;
00068     
00069     <span class="comment">//get the library loader instance</span>
00070     KLibLoader *loader = KLibLoader::self();
00071     <span class="comment">//try to load the specified library</span>
00072     KLibrary *lib = loader-&gt;globalLibrary( QFile::encodeName( service-&gt;library() ) );
00073 
00074     <span class="keywordflow">if</span> ( !lib ) {
00075         kdWarning() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"lib == NULL\n"</span>;
00076         <span class="keywordflow">return</span> 0;
00077     }
00078     <span class="comment">//look up address of init function and cast it to pointer-to-function</span>
00079     <a class="code" href="classPlugin.html">Plugin</a>* (*create_plugin)() = ( <a class="code" href="classPlugin.html">Plugin</a>* (*)() ) lib-&gt;symbol( <span class="stringliteral">"create_plugin"</span> );
00080     
00081     <span class="keywordflow">if</span> ( !create_plugin ) {
00082         kdWarning() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"create_plugin == NULL\n"</span>;
00083         <span class="keywordflow">return</span> 0;
00084     }
00085     <span class="comment">//create plugin on the heap</span>
00086     <a class="code" href="classPlugin.html">Plugin</a>* plugin = create_plugin();
00087     
00088     <span class="comment">//put plugin into store</span>
00089     StoreItem item;
00090     item.plugin = plugin;
00091     item.library = lib;
00092     item.service = service;
00093     <a class="code" href="classPluginManager.html#PluginManagerv0">m_store</a>.push_back( item );
00094     
00095     <a class="code" href="classPluginManager.html#PluginManagere5">dump</a>( service );
00096     <span class="keywordflow">return</span> plugin;
00097 }
</pre></div>    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classPluginManager_PluginManagere2_cgraph.png" border="0" usemap="#classPluginManager_PluginManagere2_cgraph_map" alt=""></center>
<map name="classPluginManager_PluginManagere2_cgraph_map">
<area href="classPluginManager.html#PluginManagere5" shape="rect" coords="288,8,440,32" alt="">
</map>
<a class="anchor" name="PluginManagere5" doxytag="PluginManager::dump" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PluginManager::dump </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const KService::Ptr&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>service</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Dump properties from a service to stdout for debugging <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>service</em>&nbsp;</td><td>Pointer to KService </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00140">140</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
Referenced by <a class="el" href="pluginmanager_8cpp-source.html#l00065">createFromService()</a>.
<p>
<div class="fragment"><pre>00141 {
00142     assert( service.data() );
00143     
00144     kdDebug() &lt;&lt; endl;
00145     
00146     kdDebug() &lt;&lt; <span class="stringliteral">"PluginManager Service DUMP:\n"</span>;
00147     kdDebug() &lt;&lt; <span class="stringliteral">"---------------------------\n"</span>;
00148     kdDebug() &lt;&lt; <span class="stringliteral">"name                          : "</span>
00149                 &lt;&lt; service-&gt;name()                                                  &lt;&lt; endl;
00150     kdDebug() &lt;&lt; <span class="stringliteral">"library                       : "</span>
00151                 &lt;&lt; service-&gt;library()                                               &lt;&lt; endl;
00152     kdDebug() &lt;&lt; <span class="stringliteral">"desktopEntryPath              : "</span>
00153                 &lt;&lt; service-&gt;desktopEntryPath()                                      &lt;&lt; endl;
00154     kdDebug() &lt;&lt; <span class="stringliteral">"X-KDE-plugintype              : "</span>
00155                 &lt;&lt; service-&gt;property( <span class="stringliteral">"X-KDE-amaroK-plugintype"</span> ).toString()        &lt;&lt; endl;
00156     kdDebug() &lt;&lt; <span class="stringliteral">"X-KDE-amaroK-authors          : "</span>
00157                 &lt;&lt; service-&gt;property( <span class="stringliteral">"X-KDE-amaroK-authors"</span> ).toStringList()       &lt;&lt; endl;
00158     kdDebug() &lt;&lt; <span class="stringliteral">"X-KDE-amaroK-version          : "</span>
00159                 &lt;&lt; service-&gt;property( <span class="stringliteral">"X-KDE-amaroK-version"</span> ).toString()           &lt;&lt; endl;
00160     kdDebug() &lt;&lt; <span class="stringliteral">"X-KDE-amaroK-framework-version: "</span>
00161                 &lt;&lt; service-&gt;property( <span class="stringliteral">"X-KDE-amaroK-framework-version"</span> ).toString() &lt;&lt; endl;
00162     
00163     kdDebug() &lt;&lt; endl;
00164 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="PluginManagere4" doxytag="PluginManager::getService" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KService::Ptr PluginManager::getService </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classPlugin.html">Plugin</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>plugin</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Look up service for loaded plugin from store <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>pointer</em>&nbsp;</td><td>Pointer to plugin </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>KService, or 0 if not found </dd></dl>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00120">120</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
References <a class="el" href="pluginmanager_8cpp-source.html#l00172">lookupPlugin()</a>, and <a class="el" href="pluginmanager_8cpp-source.html#l00029">m_store</a>.
<p>
<div class="fragment"><pre>00121 {
00122     kdDebug() &lt;&lt; k_funcinfo &lt;&lt; endl;
00123     
00124     <span class="keywordflow">if</span> ( !plugin ) {
00125         kdWarning() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"pointer == NULL\n"</span>;   
00126         <span class="keywordflow">return</span> 0;
00127     }
00128        
00129     <span class="comment">//search plugin in store</span>
00130     vector&lt;StoreItem&gt;::const_iterator iter = <a class="code" href="classPluginManager.html#PluginManagerh0">lookupPlugin</a>( plugin ); 
00131     
00132     <span class="keywordflow">if</span> ( iter == <a class="code" href="classPluginManager.html#PluginManagerv0">m_store</a>.end() ) 
00133         kdWarning() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"Plugin not found in store.\n"</span>;
00134     
00135     <span class="keywordflow">return</span> (*iter).service;
00136 }
</pre></div>    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classPluginManager_PluginManagere4_cgraph.png" border="0" usemap="#classPluginManager_PluginManagere4_cgraph_map" alt=""></center>
<map name="classPluginManager_PluginManagere4_cgraph_map">
<area href="classPluginManager.html#PluginManagerh0" shape="rect" coords="240,8,434,32" alt="">
</map>
<a class="anchor" name="PluginManagerh0" doxytag="PluginManager::lookupPlugin" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> vector&lt; <a class="el" href="structPluginManager_1_1StoreItem.html">PluginManager::StoreItem</a> &gt;::iterator PluginManager::lookupPlugin </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classPlugin.html">Plugin</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>plugin</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static, private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00172">172</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
References <a class="el" href="pluginmanager_8cpp-source.html#l00029">m_store</a>.
<p>
Referenced by <a class="el" href="pluginmanager_8cpp-source.html#l00120">getService()</a>, and <a class="el" href="pluginmanager_8cpp-source.html#l00101">unload()</a>.
<p>
<div class="fragment"><pre>00173 {
00174     vector&lt;StoreItem&gt;::iterator iter; 
00175     
00176     <span class="comment">//search plugin pointer in store</span>
00177     <span class="keywordflow">for</span> ( iter = <a class="code" href="classPluginManager.html#PluginManagerv0">m_store</a>.begin(); iter != <a class="code" href="classPluginManager.html#PluginManagerv0">m_store</a>.end(); iter++ ) {
00178         <span class="keywordflow">if</span> ( (*iter).plugin == plugin )
00179             <span class="keywordflow">break</span>;
00180     }
00181 
00182     <span class="keywordflow">return</span> iter;
00183 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="PluginManagere0" doxytag="PluginManager::query" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> KTrader::OfferList PluginManager::query </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>constraint</em> = QString::null          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
It will return a list of services that match your specifications. The only required parameter is the service type. This is something like 'text/plain' or 'text/html'. The constraint parameter is used to limit the possible choices returned based on the constraints you give it.<p>
The <code>constraint</code> language is rather full. The most common keywords are AND, OR, NOT, IN, and EXIST, all used in an almost spoken-word form. An example is: <pre class="fragment"><div> (Type == 'Service') and (('KParts/ReadOnlyPart' in ServiceTypes) or (exist Exec))
</div></pre><p>
The keys used in the query (Type, ServiceType, Exec) are all fields found in the .desktop files.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>constraint</em>&nbsp;</td><td>A constraint to limit the choices returned, QString::null to get all services of the given <code>servicetype</code> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A list of services that satisfy the query </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a href="http://developer.kde.org/documentation/library/kdeqt/tradersyntax.html">http://developer.kde.org/documentation/library/kdeqt/tradersyntax.html</a> </dd></dl>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00037">37</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
References <a class="el" href="pluginmanager_8h-source.html#l00032">FrameworkVersion</a>.
<p>
Referenced by <a class="el" href="pluginmanager_8cpp-source.html#l00051">createFromQuery()</a>.
<p>
<div class="fragment"><pre>00038 {    
00039     <span class="comment">// Add versioning constraint</span>
00040     QString str = QString( <span class="stringliteral">"[X-KDE-amaroK-framework-version] &gt;= %1 and "</span> )
00041                      .arg( FrameworkVersion );
00042     
00043     kdDebug() &lt;&lt; k_funcinfo &lt;&lt; endl
00044               &lt;&lt; <span class="stringliteral">"Plugin trader constraint: "</span> &lt;&lt; str + constraint &lt;&lt; endl;
00045     
00046     <span class="keywordflow">return</span> KTrader::self()-&gt;query( <span class="stringliteral">"amaroK/Plugin"</span>, str + constraint );
00047 }    
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="PluginManagere3" doxytag="PluginManager::unload" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void PluginManager::unload </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPlugin.html">Plugin</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>plugin</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove library and delete plugin <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign=top><em>plugin</em>&nbsp;</td><td>Pointer to plugin </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00101">101</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
References <a class="el" href="pluginmanager_8cpp-source.html#l00172">lookupPlugin()</a>, and <a class="el" href="pluginmanager_8cpp-source.html#l00029">m_store</a>.
<p>
<div class="fragment"><pre>00102 {
00103     kdDebug() &lt;&lt; k_funcinfo &lt;&lt; endl;
00104     
00105     vector&lt;StoreItem&gt;::iterator iter = <a class="code" href="classPluginManager.html#PluginManagerh0">lookupPlugin</a>( plugin ); 
00106             
00107     <span class="keywordflow">if</span> ( iter != <a class="code" href="classPluginManager.html#PluginManagerv0">m_store</a>.end() ) {
00108         <span class="keyword">delete</span> (*iter).plugin;
00109         kdDebug() &lt;&lt; <span class="stringliteral">"Unloading library: "</span>&lt;&lt; (*iter).service-&gt;library() &lt;&lt; endl;
00110         (*iter).library-&gt;unload();
00111         
00112         <a class="code" href="classPluginManager.html#PluginManagerv0">m_store</a>.erase( iter );
00113     }
00114     <span class="keywordflow">else</span>
00115         kdWarning() &lt;&lt; k_funcinfo &lt;&lt; <span class="stringliteral">"Could not unload plugin (not found in store).\n"</span>;
00116 }
</pre></div>    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classPluginManager_PluginManagere3_cgraph.png" border="0" usemap="#classPluginManager_PluginManagere3_cgraph_map" alt=""></center>
<map name="classPluginManager_PluginManagere3_cgraph_map">
<area href="classPluginManager.html#PluginManagerh0" shape="rect" coords="216,8,410,32" alt="">
</map>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="PluginManagers0" doxytag="PluginManager::FrameworkVersion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const int <a class="el" href="classPluginManager.html#PluginManagers0">PluginManager::FrameworkVersion</a> = 2<code> [static]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Bump this number whenever the plugin framework gets incompatible with older versions 
<p>
Definition at line <a class="el" href="pluginmanager_8h-source.html#l00032">32</a> of file <a class="el" href="pluginmanager_8h-source.html">pluginmanager.h</a>.
<p>
Referenced by <a class="el" href="pluginmanager_8cpp-source.html#l00037">query()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="PluginManagerv0" doxytag="PluginManager::m_store" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> vector&lt; <a class="el" href="structPluginManager_1_1StoreItem.html">PluginManager::StoreItem</a> &gt; <a class="el" href="classPluginManager.html#PluginManagerv0">PluginManager::m_store</a><code> [static, private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="pluginmanager_8cpp-source.html#l00029">29</a> of file <a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a>.
<p>
Referenced by <a class="el" href="pluginmanager_8cpp-source.html#l00065">createFromService()</a>, <a class="el" href="pluginmanager_8cpp-source.html#l00120">getService()</a>, <a class="el" href="pluginmanager_8cpp-source.html#l00172">lookupPlugin()</a>, and <a class="el" href="pluginmanager_8cpp-source.html#l00101">unload()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="pluginmanager_8h-source.html">pluginmanager.h</a><li><a class="el" href="pluginmanager_8cpp-source.html">pluginmanager.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri May 13 17:08:42 2005 for HDASS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
