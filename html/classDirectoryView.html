<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HDASS: DirectoryView class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>DirectoryView Class Reference</h1><code>#include &lt;<a class="el" href="dirview_8h-source.html">dirview.h</a>&gt;</code>
<p>
<a href="classDirectoryView-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Slots</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewi0">setDir</a> (const QString &amp;)</td></tr>

<tr><td colspan=2><br><h2>Signals</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewl0">folderSelected</a> (const QString &amp;)</td></tr>

<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewa0">DirectoryView</a> (<a class="el" href="classQWidget.html">QWidget</a> *parent=0, const char *name=0, bool sdo=FALSE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewa1">showDirsOnly</a> ()</td></tr>

<tr><td colspan=2><br><h2>Protected Slots</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewj0">slotFolderSelected</a> (QListViewItem *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewj1">openFolder</a> ()</td></tr>

<tr><td colspan=2><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb0">contentsDragEnterEvent</a> (QDragEnterEvent *e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb1">contentsDragMoveEvent</a> (QDragMoveEvent *e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb2">contentsDragLeaveEvent</a> (QDragLeaveEvent *e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb3">contentsDropEvent</a> (QDropEvent *e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb4">contentsMouseMoveEvent</a> (QMouseEvent *e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb5">contentsMousePressEvent</a> (QMouseEvent *e)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewb6">contentsMouseReleaseEvent</a> (QMouseEvent *e)</td></tr>

<tr><td colspan=2><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>QString&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewd0">fullPath</a> (QListViewItem *item)</td></tr>

<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewr0">dirsOnly</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>QListViewItem *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewr1">oldCurrent</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>QListViewItem *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewr2">dropItem</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>QTimer *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>QPoint&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewr4">presspos</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classDirectoryView.html#DirectoryViewr5">mousePressed</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="DirectoryViewa0" doxytag="DirectoryView::DirectoryView" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DirectoryView::DirectoryView </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classQWidget.html">QWidget</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>parent</em> = 0, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em> = 0, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>sdo</em> = FALSE</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00236">236</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00106">autoopen_timer</a>, <a class="el" href="dirview_8cpp-source.html#l00090">fileNormal</a>, <a class="el" href="dirview_8cpp-source.html#l00032">folder_locked</a>, <a class="el" href="dirview_8cpp-source.html#l00088">folderClosed</a>, <a class="el" href="dirview_8cpp-source.html#l00087">folderLocked</a>, <a class="el" href="dirview_8cpp-source.html#l00089">folderOpen</a>, <a class="el" href="dirview_8cpp-source.html#l00269">openFolder()</a>, <a class="el" href="dirview_8cpp-source.html#l00061">pix_file</a>, and <a class="el" href="dirview_8cpp-source.html#l00260">slotFolderSelected()</a>.
<p>
<div class="fragment"><pre>00237     : QListView( parent, name ), <a class="code" href="classDirectoryView.html#DirectoryViewr0">dirsOnly</a>( sdo ), <a class="code" href="classDirectoryView.html#DirectoryViewr1">oldCurrent</a>( 0 ),
00238       <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a>( 0 ), <a class="code" href="classDirectoryView.html#DirectoryViewr5">mousePressed</a>( FALSE )
00239 {
00240     <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a> = <span class="keyword">new</span> QTimer( <span class="keyword">this</span> );
00241     <span class="keywordflow">if</span> ( !<a class="code" href="dirview_8cpp.html#a2">folderLocked</a> ) {
00242         <a class="code" href="dirview_8cpp.html#a2">folderLocked</a> = <span class="keyword">new</span> QPixmap( folder_locked );
00243         <a class="code" href="dirview_8cpp.html#a3">folderClosed</a> = <span class="keyword">new</span> QPixmap( <span class="stringliteral">"/root/kde_application/hdass08/skin/folder_sound.png"</span> );
00244         <a class="code" href="dirview_8cpp.html#a4">folderOpen</a> = <span class="keyword">new</span> QPixmap( <span class="stringliteral">"/root/kde_application/hdass08/skin/folder_sound.png"</span> );
00245         <a class="code" href="dirview_8cpp.html#a5">fileNormal</a> = <span class="keyword">new</span> QPixmap( pix_file );
00246     }
00247 
00248     connect( <span class="keyword">this</span>, SIGNAL( doubleClicked( QListViewItem * ) ),
00249              <span class="keyword">this</span>, SLOT( <a class="code" href="classDirectoryView.html#DirectoryViewj0">slotFolderSelected</a>( QListViewItem * ) ) );
00250     connect( <span class="keyword">this</span>, SIGNAL( returnPressed( QListViewItem * ) ),
00251              <span class="keyword">this</span>, SLOT( <a class="code" href="classDirectoryView.html#DirectoryViewj0">slotFolderSelected</a>( QListViewItem * ) ) );
00252 
00253     setAcceptDrops( TRUE );
00254     viewport()-&gt;setAcceptDrops( TRUE );
00255 
00256     connect( autoopen_timer, SIGNAL( timeout() ),
00257              <span class="keyword">this</span>, SLOT( <a class="code" href="classDirectoryView.html#DirectoryViewj1">openFolder</a>() ) );
00258 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="DirectoryViewb0" doxytag="DirectoryView::contentsDragEnterEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsDragEnterEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QDragEnterEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00281">281</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00106">autoopen_timer</a>, <a class="el" href="dirview_8cpp-source.html#l00278">autoopenTime</a>, <a class="el" href="dirview_8h-source.html#l00105">dropItem</a>, and <a class="el" href="dirview_8h-source.html#l00104">oldCurrent</a>.
<p>
<div class="fragment"><pre>00282 {
00283     <span class="keywordflow">if</span> ( !QUriDrag::canDecode(e) ) {
00284         e-&gt;ignore();
00285         <span class="keywordflow">return</span>;
00286     }
00287 
00288     <a class="code" href="classDirectoryView.html#DirectoryViewr1">oldCurrent</a> = currentItem();
00289 
00290     QListViewItem *i = itemAt( contentsToViewport(e-&gt;pos()) );
00291     <span class="keywordflow">if</span> ( i ) {
00292         <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a> = i;
00293         <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;start( autoopenTime );
00294     }
00295     
00296 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewb2" doxytag="DirectoryView::contentsDragLeaveEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsDragLeaveEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QDragLeaveEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00336">336</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00106">autoopen_timer</a>, <a class="el" href="dirview_8h-source.html#l00105">dropItem</a>, and <a class="el" href="dirview_8h-source.html#l00104">oldCurrent</a>.
<p>
<div class="fragment"><pre>00337 {
00338     <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;stop();
00339     <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a> = 0;
00340 
00341     setCurrentItem( oldCurrent );
00342     setSelected( oldCurrent, TRUE );
00343 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewb1" doxytag="DirectoryView::contentsDragMoveEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsDragMoveEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QDragMoveEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00299">299</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00106">autoopen_timer</a>, <a class="el" href="dirview_8cpp-source.html#l00278">autoopenTime</a>, and <a class="el" href="dirview_8h-source.html#l00105">dropItem</a>.
<p>
<div class="fragment"><pre>00300 {
00301     <span class="keywordflow">if</span> ( !QUriDrag::canDecode(e) ) {
00302         e-&gt;ignore();
00303         <span class="keywordflow">return</span>;
00304     }
00305 
00306     QPoint vp = contentsToViewport( ( (QDragMoveEvent*)e )-&gt;pos() );
00307     QListViewItem *i = itemAt( vp );
00308     
00309     <span class="keywordflow">if</span> ( i ) {
00310         setSelected( i, TRUE );
00311         e-&gt;accept();
00312         <span class="keywordflow">if</span> ( i != <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a> ) {
00313             <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;stop();
00314             <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a> = i;
00315             <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;start( autoopenTime );
00316         }
00317         <span class="keywordflow">switch</span> ( e-&gt;action() ) {
00318         <span class="keywordflow">case</span> QDropEvent::Copy:
00319             <span class="keywordflow">break</span>;
00320         <span class="keywordflow">case</span> QDropEvent::Move:
00321             e-&gt;acceptAction();
00322             <span class="keywordflow">break</span>;
00323         <span class="keywordflow">case</span> QDropEvent::Link:
00324             e-&gt;acceptAction();
00325             <span class="keywordflow">break</span>;
00326         <span class="keywordflow">default</span>:
00327             ;
00328         }
00329     } <span class="keywordflow">else</span> {
00330         e-&gt;ignore();
00331         <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;stop();
00332         <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a> = 0;
00333     }
00334 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewb3" doxytag="DirectoryView::contentsDropEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsDropEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QDropEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00345">345</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00106">autoopen_timer</a>, and <a class="el" href="dirview_8cpp-source.html#l00389">fullPath()</a>.
<p>
<div class="fragment"><pre>00346 {
00347     <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;stop();
00348 
00349     <span class="keywordflow">if</span> ( !QUriDrag::canDecode(e) ) {
00350         e-&gt;ignore();
00351         <span class="keywordflow">return</span>;
00352     }
00353 
00354     QListViewItem *item = itemAt( contentsToViewport(e-&gt;pos()) );
00355     
00356     <span class="keywordflow">if</span>(item)
00357     {
00358         <span class="comment">//DAVID make a list to receive the dropping objects</span>
00359         QStrList lst;
00360         
00361         <span class="comment">//DAVID decode the objects data to list</span>
00362         QUriDrag::decode( e, lst );
00363         
00364         QString DirName=QDir::convertSeparators(<a class="code" href="classDirectoryView.html#DirectoryViewd0">fullPath</a>(item));
00365 
00366         <span class="keywordflow">for</span> ( uint i = 0; i &lt; lst.count(); ++i ) 
00367         
00368         {
00369                 
00370                 <span class="comment">//kdDebug()&lt;&lt;lst.at(i);</span>
00371                 <span class="comment">//DAVID get the dropping object name</span>
00372                 QString fullpathfilename = QDir::convertSeparators(QUriDrag::uriToLocalFile(lst.at(i)));
00373                 QUrl url(fullpathfilename);
00374                 QString filename=url.fileName();
00375                 QString distfilename=DirName+QString(<span class="stringliteral">"/"</span>)+filename;
00376                 <span class="comment">//copy file</span>
00377                 KIO::copy(KURL(fullpathfilename),KURL(distfilename),<span class="keyword">false</span>);
00378         }
00379         
00380     }
00381     <span class="keywordflow">else</span>
00382     {
00383      e-&gt;ignore();
00384     }
00385 
00386 }
</pre></div>    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classDirectoryView_DirectoryViewb3_cgraph.png" border="0" usemap="#classDirectoryView_DirectoryViewb3_cgraph_map" alt=""></center>
<map name="classDirectoryView_DirectoryViewb3_cgraph_map">
<area href="classDirectoryView.html#DirectoryViewd0" shape="rect" coords="284,8,438,32" alt="">
</map>
<a class="anchor" name="DirectoryViewb4" doxytag="DirectoryView::contentsMouseMoveEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsMouseMoveEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QMouseEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00424">424</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8cpp-source.html#l00389">fullPath()</a>, <a class="el" href="dirview_8h-source.html#l00108">mousePressed</a>, and <a class="el" href="dirview_8h-source.html#l00107">presspos</a>.
<p>
<div class="fragment"><pre>00425 {
00426     <span class="keywordflow">if</span> ( <a class="code" href="classDirectoryView.html#DirectoryViewr5">mousePressed</a> &amp;&amp; ( <a class="code" href="classDirectoryView.html#DirectoryViewr4">presspos</a> - e-&gt;pos() ).manhattanLength() &gt; QApplication::startDragDistance() ) {
00427         <a class="code" href="classDirectoryView.html#DirectoryViewr5">mousePressed</a> = FALSE;
00428         QListViewItem *item = itemAt( contentsToViewport(presspos) );
00429         <span class="keywordflow">if</span> ( item ) {
00430             QString source = <a class="code" href="classDirectoryView.html#DirectoryViewd0">fullPath</a>(item);
00431             <span class="keywordflow">if</span> ( QFile::exists(source) ) {
00432                 QUriDrag* ud = <span class="keyword">new</span> QUriDrag(viewport());
00433                 ud-&gt;setFileNames( source );
00434                 <span class="keywordflow">if</span> ( ud-&gt;drag() )
00435                     QMessageBox::information( <span class="keyword">this</span>, <span class="stringliteral">"Drag source"</span>,
00436                     QString(<span class="stringliteral">"Delete "</span>) + QDir::convertSeparators(source), <span class="stringliteral">"Not implemented"</span> );
00437             }
00438         }
00439     }
00440 }
</pre></div>    </td>
  </tr>
</table>

<p>
Here is the call graph for this function:<p><center><img src="classDirectoryView_DirectoryViewb4_cgraph.png" border="0" usemap="#classDirectoryView_DirectoryViewb4_cgraph_map" alt=""></center>
<map name="classDirectoryView_DirectoryViewb4_cgraph_map">
<area href="classDirectoryView.html#DirectoryViewd0" shape="rect" coords="326,8,481,32" alt="">
</map>
<a class="anchor" name="DirectoryViewb5" doxytag="DirectoryView::contentsMousePressEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsMousePressEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QMouseEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00408">408</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00108">mousePressed</a>, and <a class="el" href="dirview_8h-source.html#l00107">presspos</a>.
<p>
<div class="fragment"><pre>00409 {
00410     QListView::contentsMousePressEvent(e);
00411     QPoint p( contentsToViewport( e-&gt;pos() ) );
00412     QListViewItem *i = itemAt( p );
00413     <span class="keywordflow">if</span> ( i ) {
00414         <span class="comment">// if the user clicked into the root decoration of the item, don't try to start a drag!</span>
00415         <span class="keywordflow">if</span> ( p.x() &gt; header()-&gt;cellPos( header()-&gt;mapToActual( 0 ) ) +
00416              treeStepSize() * ( i-&gt;depth() + ( rootIsDecorated() ? 1 : 0) ) + itemMargin() ||
00417              p.x() &lt; header()-&gt;cellPos( header()-&gt;mapToActual( 0 ) ) ) {
00418             <a class="code" href="classDirectoryView.html#DirectoryViewr4">presspos</a> = e-&gt;pos();
00419             <a class="code" href="classDirectoryView.html#DirectoryViewr5">mousePressed</a> = TRUE;
00420         }
00421     }
00422 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewb6" doxytag="DirectoryView::contentsMouseReleaseEvent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::contentsMouseReleaseEvent </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QMouseEvent *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>e</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00442">442</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00108">mousePressed</a>.
<p>
<div class="fragment"><pre>00443 {
00444     <a class="code" href="classDirectoryView.html#DirectoryViewr5">mousePressed</a> = FALSE;
00445 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewl0" doxytag="DirectoryView::folderSelected" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::folderSelected </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [signal]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8moc_8cc-source.html#l00097">97</a> of file <a class="el" href="dirview_8moc_8cc-source.html">dirview.moc.cc</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00260">slotFolderSelected()</a>.
<p>
<div class="fragment"><pre>00098 {
00099     activate_signal( staticMetaObject()-&gt;signalOffset() + 0, t0 );
00100 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewd0" doxytag="DirectoryView::fullPath" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> QString DirectoryView::fullPath </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QListViewItem *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>item</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00389">389</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00345">contentsDropEvent()</a>, and <a class="el" href="dirview_8cpp-source.html#l00424">contentsMouseMoveEvent()</a>.
<p>
<div class="fragment"><pre>00390 {
00391     QString fullpath = item-&gt;text(0);
00392     <span class="keywordflow">while</span> ( (item=item-&gt;parent()) ) {
00393         <span class="keywordflow">if</span> ( item-&gt;parent() )
00394             fullpath = item-&gt;text(0) + <span class="stringliteral">"/"</span> + fullpath;
00395         <span class="keywordflow">else</span>
00396             fullpath = item-&gt;text(0) + fullpath;
00397     }
00398 <span class="preprocessor">#ifdef Q_WS_WIN</span>
00399 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (fullpath.length() &gt; 2 &amp;&amp; fullpath[1] != <span class="charliteral">':'</span>) {
00400                 QDir dir(fullpath);
00401                 fullpath = dir.currentDirPath().left(2) + fullpath;
00402         }
00403 <span class="preprocessor">#endif</span>
00404 <span class="preprocessor"></span>        
00405     <span class="keywordflow">return</span> fullpath;
00406 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewj1" doxytag="DirectoryView::openFolder" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::openFolder </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, slot]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00269">269</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00106">autoopen_timer</a>, and <a class="el" href="dirview_8h-source.html#l00105">dropItem</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00236">DirectoryView()</a>.
<p>
<div class="fragment"><pre>00270 {
00271     <a class="code" href="classDirectoryView.html#DirectoryViewr3">autoopen_timer</a>-&gt;stop();
00272     <span class="keywordflow">if</span> ( <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a> &amp;&amp; !<a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a>-&gt;isOpen() ) {
00273         <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a>-&gt;setOpen( TRUE );
00274         <a class="code" href="classDirectoryView.html#DirectoryViewr2">dropItem</a>-&gt;repaint();
00275     }
00276 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewi0" doxytag="DirectoryView::setDir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::setDir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const QString &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [slot]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00447">447</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
<div class="fragment"><pre>00448 {
00449     QListViewItemIterator it( <span class="keyword">this</span> );
00450     ++it;
00451     <span class="keywordflow">for</span> ( ; it.current(); ++it ) {
00452         it.current()-&gt;setOpen( FALSE );
00453     }
00454 
00455     QStringList lst( QStringList::split( <span class="stringliteral">"/"</span>, s ) );
00456     QListViewItem *item = firstChild();
00457     QStringList::Iterator it2 = lst.begin();
00458     <span class="keywordflow">for</span> ( ; it2 != lst.end(); ++it2 ) {
00459         <span class="keywordflow">while</span> ( item ) {
00460             <span class="keywordflow">if</span> ( item-&gt;text( 0 ) == *it2 ) {
00461                 item-&gt;setOpen( TRUE );
00462                 <span class="keywordflow">break</span>;
00463             }
00464             item = item-&gt;itemBelow();
00465         }
00466     }
00467 
00468     <span class="keywordflow">if</span> ( item )
00469         setCurrentItem( item );
00470 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewa1" doxytag="DirectoryView::showDirsOnly" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool DirectoryView::showDirsOnly </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00080">80</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
References <a class="el" href="dirview_8h-source.html#l00103">dirsOnly</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00260">slotFolderSelected()</a>.
<p>
<div class="fragment"><pre>00080 { <span class="keywordflow">return</span> <a class="code" href="classDirectoryView.html#DirectoryViewr0">dirsOnly</a>; }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewj0" doxytag="DirectoryView::slotFolderSelected" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void DirectoryView::slotFolderSelected </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QListViewItem *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [protected, slot]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8cpp-source.html#l00260">260</a> of file <a class="el" href="dirview_8cpp-source.html">dirview.cpp</a>.
<p>
References <a class="el" href="dirview_8moc_8cc-source.html#l00097">folderSelected()</a>, <a class="el" href="dirview_8cpp-source.html#l00199">Directory::fullName()</a>, and <a class="el" href="dirview_8h-source.html#l00080">showDirsOnly()</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00236">DirectoryView()</a>.
<p>
<div class="fragment"><pre>00261 {
00262     <span class="keywordflow">if</span> ( !i || !<a class="code" href="classDirectoryView.html#DirectoryViewa1">showDirsOnly</a>() )
00263         <span class="keywordflow">return</span>;
00264 
00265     <a class="code" href="classDirectory.html">Directory</a> *dir = (<a class="code" href="classDirectory.html">Directory</a>*)i;
00266     emit <a class="code" href="classDirectoryView.html#DirectoryViewl0">folderSelected</a>( dir-&gt;<a class="code" href="classDirectory.html#Directorya4">fullName</a>() );
00267 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="DirectoryViewr3" doxytag="DirectoryView::autoopen_timer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> QTimer* <a class="el" href="classDirectoryView.html#DirectoryViewr3">DirectoryView::autoopen_timer</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00106">106</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00281">contentsDragEnterEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00336">contentsDragLeaveEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00299">contentsDragMoveEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00345">contentsDropEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00236">DirectoryView()</a>, and <a class="el" href="dirview_8cpp-source.html#l00269">openFolder()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewr0" doxytag="DirectoryView::dirsOnly" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool <a class="el" href="classDirectoryView.html#DirectoryViewr0">DirectoryView::dirsOnly</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00103">103</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
Referenced by <a class="el" href="dirview_8h-source.html#l00080">showDirsOnly()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewr2" doxytag="DirectoryView::dropItem" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> QListViewItem* <a class="el" href="classDirectoryView.html#DirectoryViewr2">DirectoryView::dropItem</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00105">105</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00281">contentsDragEnterEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00336">contentsDragLeaveEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00299">contentsDragMoveEvent()</a>, and <a class="el" href="dirview_8cpp-source.html#l00269">openFolder()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewr5" doxytag="DirectoryView::mousePressed" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool <a class="el" href="classDirectoryView.html#DirectoryViewr5">DirectoryView::mousePressed</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00108">108</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00424">contentsMouseMoveEvent()</a>, <a class="el" href="dirview_8cpp-source.html#l00408">contentsMousePressEvent()</a>, and <a class="el" href="dirview_8cpp-source.html#l00442">contentsMouseReleaseEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewr1" doxytag="DirectoryView::oldCurrent" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> QListViewItem* <a class="el" href="classDirectoryView.html#DirectoryViewr1">DirectoryView::oldCurrent</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00104">104</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00281">contentsDragEnterEvent()</a>, and <a class="el" href="dirview_8cpp-source.html#l00336">contentsDragLeaveEvent()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="DirectoryViewr4" doxytag="DirectoryView::presspos" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> QPoint <a class="el" href="classDirectoryView.html#DirectoryViewr4">DirectoryView::presspos</a><code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="dirview_8h-source.html#l00107">107</a> of file <a class="el" href="dirview_8h-source.html">dirview.h</a>.
<p>
Referenced by <a class="el" href="dirview_8cpp-source.html#l00424">contentsMouseMoveEvent()</a>, and <a class="el" href="dirview_8cpp-source.html#l00408">contentsMousePressEvent()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="dirview_8h-source.html">dirview.h</a><li><a class="el" href="dirview_8moc_8cc-source.html">dirview.moc.cc</a><li><a class="el" href="dirview_8cpp-source.html">dirview.cpp</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Fri May 13 17:05:33 2005 for HDASS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
