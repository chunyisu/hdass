<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>HDASS: analyzerbase.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>analyzerbase.h</h1><a href="analyzerbase_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">// Maintainer: Max Howell &lt;max.howell@methylblue.com&gt;, (C) 2004</span>
00002 <span class="comment">// Copyright:  See COPYING file that comes with this distribution</span>
00003 
00004 <span class="preprocessor">#ifndef ANALYZERBASE_H</span>
00005 <span class="preprocessor"></span><span class="preprocessor">#define ANALYZERBASE_H</span>
00006 <span class="preprocessor"></span>
00007 <span class="preprocessor">#ifdef __FreeBSD__</span>
00008 <span class="preprocessor"></span><span class="preprocessor">    #include &lt;sys/types.h&gt;</span>
00009 <span class="preprocessor">#endif</span>
00010 <span class="preprocessor"></span>
00011 <span class="preprocessor">#include &lt;<a class="code" href="config_8h.html">config.h</a>&gt;</span>  <span class="comment">//HAVE_QGLWIDGET</span>
00012 <span class="preprocessor">#include "<a class="code" href="fht_8h.html">fht.h</a>"</span>     <span class="comment">//stack allocated and convenience</span>
00013 <span class="preprocessor">#include &lt;qpixmap.h&gt;</span> <span class="comment">//stack allocated and convenience</span>
00014 <span class="preprocessor">#include &lt;qtimer.h&gt;</span>  <span class="comment">//stack allocated</span>
00015 <span class="preprocessor">#include &lt;qwidget.h&gt;</span> <span class="comment">//baseclass</span>
00016 <span class="preprocessor">#include &lt;vector&gt;</span>    <span class="comment">//included for convenience</span>
00017 
00018 <span class="preprocessor">#ifdef HAVE_QGLWIDGET</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#include &lt;qgl.h&gt;</span>     <span class="comment">//baseclass</span>
00020 <span class="preprocessor">#include &lt;GL/gl.h&gt;</span>  <span class="comment">//included for convenience</span>
00021 <span class="preprocessor">#include &lt;GL/glu.h&gt;</span> <span class="comment">//included for convenience</span>
00022 <span class="preprocessor">#else</span>
00023 <span class="preprocessor"></span><span class="comment">//this is a workaround for compile problems due to moc</span>
<a name="l00024"></a><a class="code" href="analyzerbase_8h.html#a0">00024</a> <span class="preprocessor">#define QGLWidget QWidget</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00026 <span class="preprocessor"></span>
00027 <span class="keyword">class </span>QEvent;
00028 <span class="keyword">class </span>QPaintEvent;
00029 <span class="keyword">class </span>QResizeEvent;
00030 
<a name="l00031"></a><a class="code" href="namespaceAnalyzer.html">00031</a> <span class="keyword">namespace </span>Analyzer {
00032 
<a name="l00033"></a><a class="code" href="namespaceAnalyzer.html#a0">00033</a> <span class="keyword">typedef</span> std::vector&lt;float&gt; <a class="code" href="namespaceAnalyzer.html#a0">Scope</a>;
00034 
00035 <span class="comment">//TODO what would be grand would be to get the raw scope by reference so we could hang on to it for the purpose of paused()</span>
00036 <span class="comment">//NOTE there is no virtual dtor for this template because the base class has to be a widget (it won't</span>
00037 <span class="comment">//     compile otherwise) and all Qt objects have virtual dtors.</span>
00038 
<a name="l00039"></a><a class="code" href="classAnalyzer_1_1Base.html">00039</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> W&gt; <span class="keyword">class </span><a class="code" href="classAnalyzer_1_1Base.html">Base</a> : <span class="keyword">public</span> W
00040 {
00041 <span class="keyword">public</span>:
<a name="l00042"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basea0">00042</a>     uint <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basea0">timeout</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_timeout; }
<a name="l00043"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basea1">00043</a>     uint <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basea1">height</a>()  <span class="keyword">const</span> { <span class="keywordflow">return</span> m_height; }
00044 
00045 <span class="keyword">protected</span>:
00046     <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb0">Base</a>( <a class="code" href="classQWidget.html">QWidget</a>*, uint, uint = 7 );
00047 
00048     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb1">drawFrame</a>();
00049     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb2">transform</a>( <a class="code" href="namespaceAnalyzer.html#a0">Scope</a>&amp; );
00050     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb3">analyze</a>( <span class="keyword">const</span> <a class="code" href="namespaceAnalyzer.html#a0">Scope</a>&amp; ) = 0;
00051     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb4">paused</a>();
00052     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb5">demo</a>();
00053 
<a name="l00054"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb6">00054</a>     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb6">changeTimeout</a>( uint newTimeout )
00055     {
00056         m_timer.changeInterval( newTimeout );
00057         m_timeout = newTimeout;
00058     }
00059 
00060 <span class="keyword">private</span>:
00061     <span class="keywordtype">bool</span> <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Based0">event</a>( QEvent* );
00062 
00063 <span class="keyword">protected</span>:
<a name="l00064"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basep0">00064</a>     QTimer m_timer;
<a name="l00065"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basep1">00065</a>     uint   m_timeout;
<a name="l00066"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basep2">00066</a>     uint   m_height;
<a name="l00067"></a><a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Basep3">00067</a>     <a class="code" href="classFHT.html">FHT</a>    m_fht;
00068 };
00069 
00070 
<a name="l00071"></a><a class="code" href="classAnalyzer_1_1Base2D.html">00071</a> <span class="keyword">class </span><a class="code" href="classAnalyzer_1_1Base2D.html">Base2D</a> : <span class="keyword">public</span> <a class="code" href="classAnalyzer_1_1Base.html">Base</a>&lt;QWidget&gt;
00072 {
00073 Q_OBJECT
00074 <span class="keyword">public</span>:
<a name="l00075"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma6">00075</a>     <span class="keyword">const</span> QPixmap *<a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma6">background</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;<a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr0">m_background</a>; }
<a name="l00076"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma7">00076</a>     <span class="keyword">const</span> QPixmap *<a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma7">canvas</a>()     <span class="keyword">const</span> { <span class="keywordflow">return</span> &amp;<a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr1">m_canvas</a>; }
00077 
00078 <span class="keyword">private</span> slots:
<a name="l00079"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dk0">00079</a>     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dk0">draw</a>() { <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb1">drawFrame</a>(); bitBlt( <span class="keyword">this</span>, 0, 0, <a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma7">canvas</a>() ); }
00080 
00081 <span class="keyword">protected</span>:
00082     <a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Db0">Base2D</a>( <a class="code" href="classQWidget.html">QWidget</a>*, uint timeout, uint scopeSize = 7 );
00083 
<a name="l00084"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Db1">00084</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Db1">init</a>() {}
00085 
<a name="l00086"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb0">00086</a>     QPixmap  *<a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma7">canvas</a>() { <span class="keywordflow">return</span> &amp;<a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr1">m_canvas</a>; }
<a name="l00087"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb1">00087</a>     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb1">eraseCanvas</a>() { bitBlt( <a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma7">canvas</a>(), 0, 0, <a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma6">background</a>() ); }
00088 
<a name="l00089"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb2">00089</a>     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb2">paintEvent</a>( QPaintEvent* ) { <span class="keywordflow">if</span>( !<a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr1">m_canvas</a>.isNull() ) bitBlt( <span class="keyword">this</span>, 0, 0, <a class="code" href="classAnalyzer_1_1Base2D.html#Sonograma7">canvas</a>() ); }
00090     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb3">resizeEvent</a>( QResizeEvent* );
00091     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb4">paletteChange</a>( <span class="keyword">const</span> <span class="keyword">class</span> QPalette&amp; );
00092 
00093     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base2D.html#Sonogramb5">polish</a>();
00094 
00095 <span class="keyword">private</span>:
<a name="l00096"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr0">00096</a>     QPixmap <a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr0">m_background</a>;
<a name="l00097"></a><a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr1">00097</a>     QPixmap <a class="code" href="classAnalyzer_1_1Base2D.html#Analyzer_1_1Base2Dr1">m_canvas</a>;
00098 };
00099 
00100 
00101 
00102 <span class="comment">//This mess is because moc generates an entry for this class despite the #if block</span>
00103 <span class="comment">//1. the Q_OBJECT macro must be exposed</span>
00104 <span class="comment">//2. we have to define the class</span>
00105 <span class="comment">//3. we have to declare a ctor (to satisfy the inheritance)</span>
00106 <span class="comment">//4. the slot must also by visible (!)</span>
00107 <span class="comment">//TODO find out how to stop moc generating a metaobject for this class</span>
<a name="l00108"></a><a class="code" href="classAnalyzer_1_1Base3D.html">00108</a> <span class="keyword">class </span><a class="code" href="classAnalyzer_1_1Base3D.html">Base3D</a> : <span class="keyword">public</span> <a class="code" href="classAnalyzer_1_1Base.html">Base</a>&lt;QGLWidget&gt;
00109 {
00110 Q_OBJECT
00111 <span class="preprocessor">#ifdef HAVE_QGLWIDGET</span>
00112 <span class="preprocessor"></span><span class="keyword">protected</span>:
00113     <a class="code" href="classAnalyzer_1_1Base3D.html#Analyzer_1_1Base3Db0">Base3D</a>( <a class="code" href="classQWidget.html">QWidget</a>*, uint, uint = 7 );
00114 <span class="keyword">private</span> slots:
00115     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base3D.html#Analyzer_1_1Base3Dk0">draw</a>() { <a class="code" href="classAnalyzer_1_1Base.html#Analyzer_1_1Baseb1">drawFrame</a>(); }
00116 <span class="preprocessor">#else</span>
00117 <span class="preprocessor"></span><span class="keyword">protected</span>:
<a name="l00118"></a><a class="code" href="classAnalyzer_1_1Base3D.html#Analyzer_1_1Base3Db0">00118</a>     <a class="code" href="classAnalyzer_1_1Base3D.html#Analyzer_1_1Base3Db0">Base3D</a>( <a class="code" href="classQWidget.html">QWidget</a> *w, uint i1, uint i2 ) : <a class="code" href="classAnalyzer_1_1Base.html">Base</a>&lt;<a class="code" href="classQGLWidget.html">QGLWidget</a>&gt;( w, i1, i2 ) {}
00119 <span class="keyword">private</span> slots:
<a name="l00120"></a><a class="code" href="classAnalyzer_1_1Base3D.html#Analyzer_1_1Base3Dk0">00120</a>     <span class="keywordtype">void</span> <a class="code" href="classAnalyzer_1_1Base3D.html#Analyzer_1_1Base3Dk0">draw</a>() {}
00121 <span class="preprocessor">#endif</span>
00122 <span class="preprocessor"></span>};
00123 
00124 
<a name="l00125"></a><a class="code" href="classAnalyzer_1_1Factory.html">00125</a> <span class="keyword">class </span><a class="code" href="classAnalyzer_1_1Factory.html">Factory</a>
00126 {
00127     <span class="comment">//Currently this is a rather small class, its only purpose</span>
00128     <span class="comment">//to ensure that making changes to analyzers will not require</span>
00129     <span class="comment">//rebuilding the world!</span>
00130 
00131     <span class="comment">//eventually it would be better to make analyzers pluggable</span>
00132     <span class="comment">//but I can't be arsed, nor can I see much reason to do so</span>
00133     <span class="comment">//yet!</span>
00134 <span class="keyword">public</span>:
00135     <span class="keyword">static</span> <a class="code" href="classQWidget.html">QWidget</a>* <a class="code" href="classAnalyzer_1_1Factory.html#Analyzer_1_1Factorye0">createAnalyzer</a>( <a class="code" href="classQWidget.html">QWidget</a>* );
00136 };
00137 
00138 
00139 <span class="keywordtype">void</span> <a class="code" href="namespaceAnalyzer.html#a1">interpolate</a>( <span class="keyword">const</span> <a class="code" href="namespaceAnalyzer.html#a0">Scope</a>&amp;, <a class="code" href="namespaceAnalyzer.html#a0">Scope</a>&amp; );
00140 <span class="keywordtype">void</span> <a class="code" href="namespaceAnalyzer.html#a2">initSin</a>( <a class="code" href="namespaceAnalyzer.html#a0">Scope</a>&amp;, <span class="keyword">const</span> uint = 6000 );
00141 
00142 } <span class="comment">//END namespace Analyzer</span>
00143 
00144 <span class="keyword">using</span> <a class="code" href="namespaceAnalyzer.html#a0">Analyzer::Scope</a>;
00145 
00146 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri May 13 16:53:34 2005 for HDASS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.6 </small></address>
</body>
</html>
